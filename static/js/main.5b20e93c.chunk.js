(this["webpackJsonpsketchy-react"]=this["webpackJsonpsketchy-react"]||[]).push([[0],{15:function(t,e,n){},16:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var a=n(2),c=n(3),i=n.n(c),r=n(9),s=n.n(r),o=(n(15),n(0)),l=n(6),u=n(1),h=i.a.createContext(),g=function(t){var e=t.children,n=Object(c.useState)("rectangle"),i=Object(u.a)(n,2),r=i[0],s=i[1];return Object(a.jsx)(h.Provider,{value:[r,s],children:e})},f=n(8);function b(){var t=Object(c.useContext)(h),e=Object(u.a)(t,2),n=e[0],i=(e[1],Object(c.useState)(null)),r=Object(u.a)(i,2),s=r[0],g=r[1],b=Object(c.useState)(null),d=Object(u.a)(b,2),x=d[0],y=d[1],p=Object(c.useState)([]),v=Object(u.a)(p,2),j=v[0],O=v[1],m=Object(c.useRef)(null),M=Object(c.useRef)(null),w=f.a.generator();Object(c.useLayoutEffect)((function(){var t=m.current;t.width=2*window.innerWidth,t.height=2*window.innerHeight,t.style.width="".concat(window.innerWidth,"px"),t.style.height="".concat(window.innerHeight,"px"),M.current=f.a.canvas(t);var e=t.getContext("2d");e.scale(2,2),e.clearRect(0,0,t.width,t.height),j.forEach((function(t){var e=t.element;return M.current.draw(e)}))}),[j]);var k=function(t,e,n){var a,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=n.x1,r=n.y1,s=n.x2,o=n.y2,l={fill:"red"};switch(e){case"line":a=w.line(i,r,s,o,l);break;case"rectangle":a=c?w.rectangle(i,r,s-i,s-i,l):w.rectangle(i,r,s-i,o-r,l);break;case"ellipse":a=c?w.ellipse((i+s)/2,(r+o)/2,s-i,s-i,l):w.ellipse((i+s)/2,(r+o)/2,s-i,o-r,l);break;case"triangle":a=c?w.path("M ".concat(i,",").concat(o," L ").concat(s,",").concat(o," L ").concat((s-i)/2+i,",").concat((i-s)*Math.sqrt(3)/2+o," L ").concat(i,",").concat(o," Z"),l):w.path("M ".concat(i,",").concat(o," L ").concat(s,",").concat(o," L ").concat((s-i)/2+i,",").concat((o-r)/2+r," L ").concat(i,",").concat(o," Z"),l);break;case"arrow":var u=.4,h=i-s,g=r-o,f=(h*Math.cos(u)+g*Math.sin(u))/10+s,b=(-h*Math.sin(u)+g*Math.cos(u))/10+o,d=(h*Math.cos(u)-g*Math.sin(u))/10+s,x=(h*Math.sin(u)+g*Math.cos(u))/10+o;a=w.path("M ".concat(i,",").concat(r," L ").concat(s,",").concat(o," L ").concat(f,",").concat(b," M ").concat(s,",").concat(o," L ").concat(d,",").concat(x," Z"));break;case"outline":var y=6;a=w.rectangle(i-y,r-y,s-i+2*y,o-r+2*y,{roughness:.5,stroke:"grey",strokeWidth:2,strokeLineDash:[5,10]});break;default:a=w.line(i,r,s,o,l)}return{id:t,type:e,x1:i,y1:r,x2:s,y2:o,element:a}},L=function(t,e,a){var c=k(t,e,a),i=Object(o.a)(j);if(i[t]=c,x&&"selection"===n){var r=a.x1,s=a.y1,l=k(j.length-2,"outline",a),u=k(j.length-1,"outline",{x1:r-2,y1:s-2,x2:r+2,y2:s+2});i[j.length-2]=l,i[j.length-1]=u}O(i)},C=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},S=function(t,e){return j.map((function(n){return Object(l.a)(Object(l.a)({},n),{},{position:Y(t,e,n)})})).find((function(t){return null!==t.position}))},R=function(t){var e=t.type,n=t.x1,a=t.y1,c=t.x2,i=t.y2,r=Math.min(n,c),s=Math.max(n,c),o=Math.min(a,i),l=Math.max(a,i);switch(e){case"rectangle":case"ellipse":return{x1:r,y1:o,x2:s,y2:l};case"triangle":return{x1:n,y1:a,x2:c,y2:i};case"line":return n<c||n===c&&a<i?{x1:n,y1:a,x2:c,y2:i}:{x1:c,y1:i,x2:n,y2:a};case"arrow":default:return{x1:n,y1:a,x2:c,y2:i}}},Y=function(t,e,n){var a=n.type,c=n.x1,i=n.y1,r=n.x2,s=n.y2;if("rectangle"===a||"ellipse"===a||"triangle"===a){if(Math.abs(t-6)>c&&Math.abs(t+6)<r&&Math.abs(e-6)>i&&Math.abs(e+6)<s)return n.element.options.fill?"inside":"empty";var o=F(t,e,c,i,6,"topLeft"),l=F(t,e,r,i,6,"topRight"),u=F(t,e,c,s,6,"bottomLeft"),h=F(t,e,r,s,6,"bottomRight"),g=Math.abs(t-c)<6||Math.abs(t-r)<6||Math.abs(e-i)<6||Math.abs(e-s)<6?"edge":null;return o||l||u||h||g}var f={x:c,y:i},b={x:r,y:s},d={x:t,y:e},x=C(f,b)-(C(f,d)+C(b,d)),y=F(t,e,c,i,6,"start"),p=F(t,e,r,s,6,"end"),v=Math.abs(x)<6?"inside":null;return y||p||v},F=function(t,e,n,a,c,i){return Math.abs(t-n)<c&&Math.abs(e-a)<c?i:null},X=function(t){var e=t.x1,n=t.y1,a=t.x2,c=t.y2,i=k(j.length,"outline",{x1:e,y1:n,x2:a,y2:c});O((function(t){return[].concat(Object(o.a)(t),[i])}));var r=k(j.length+1,"outline",{x1:e-4,y1:n-4,x2:e-2,y2:n-2});O((function(t){return[].concat(Object(o.a)(t),[r])}))},D=function(){var t=j.find((function(t){return"outline"===t.type}));t&&(!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Object(o.a)(j);n.splice(t,e),O(n)}(t.id,2),y(null),g(null))},E=function(t){switch(t){case"inside":return"move"}};return Object(a.jsx)("canvas",{ref:m,onMouseDown:function(t){var e=t.clientX,a=t.clientY;if("selection"===n){var c=S(e,a);if(c){var i=c.x1,r=c.y1,s=c.x2,u=c.y2;if(x&&x.id===c.id){var h=s-i,f=u-r;y(Object(l.a)(Object(l.a)({},c),{},{offsetX:e-i,offsetY:a-r,width:h,height:f})),O((function(t){return t})),g("moving")}else D(),"empty"===c.position||x||(y(c),X(c),t.target.style.cursor=c?E(c.position):"default")}else y(null),D()}else{x&&D();var b=j.length,d=k(b,n,{x1:e,y1:a,x2:e,y2:a});O((function(t){return[].concat(Object(o.a)(t),[d])})),g("drawing")}},onMouseUp:function(){if("drawing"===s||"resizing"===s){var t=j.length-1,e=R(j[t]),a=e.x1,c=e.y1,i=e.x2,r=e.y2;L(t,n,{x1:a,y1:c,x2:i,y2:r})}g("none")},onMouseMove:function(t){var e=t.clientX,a=t.clientY;if("selection"===n&&x){var c=S(e,a);t.target.style.cursor=c?E(c.position):"default"}if("drawing"===s){var i=j.length-1,r=j[i],o=r.x1,l=r.y1;L(i,n,{x1:o,y1:l,x2:e,y2:a})}else if("moving"===s){var u=x.id,h=x.offsetX,g=x.offsetY,f=x.width,b=x.height,d=e-h,y=a-g;L(u,x.type,{x1:d,y1:y,x2:d+f,y2:y+b})}},style:{backgroundImage:"url(".concat("/sketchy-notebook/images/noise.png",")")},children:"Your browser doesn't support canvas"})}n(16);var d=n.p+"static/media/select.70df1ec0.svg",x=n.p+"static/media/select-active.f1899dc7.svg",y=n.p+"static/media/rectangle.f5d954ea.svg",p=n.p+"static/media/rectangle-active.72c4a5ef.svg",v=n.p+"static/media/ellipse.3530a60b.svg",j=n.p+"static/media/ellipse-active.957d413c.svg",O=n.p+"static/media/triangle.ecc9a150.svg",m=n.p+"static/media/triangle-active.f995cf0d.svg",M=n.p+"static/media/line.0ee8f270.svg",w=n.p+"static/media/line-active.53b5389c.svg",k=n.p+"static/media/arrow.b24a6f66.svg",L=n.p+"static/media/arrow-active.d3871a3f.svg";function C(){return Object(a.jsxs)("div",{className:"tool-box",children:[Object(a.jsx)("h2",{children:"TOOLS"}),Object(a.jsx)(S,{type:"selection",images:[d,x]},"1"),Object(a.jsx)(S,{type:"rectangle",images:[y,p]},"2"),Object(a.jsx)(S,{type:"ellipse",images:[v,j]},"3"),Object(a.jsx)(S,{type:"triangle",images:[O,m]},"4"),Object(a.jsx)(S,{type:"line",images:[M,w]},"5"),Object(a.jsx)(S,{type:"arrow",images:[k,L]},"6")]})}function S(t){var e=Object(c.useContext)(h),n=Object(u.a)(e,2),i=n[0],r=n[1],s=t.type,o=t.images,l=Object(u.a)(o,2),g=l[0],f=l[1];return Object(a.jsxs)("label",{className:"tool",children:[Object(a.jsx)("input",{type:"radio",value:s,checked:i===s,onChange:function(){r(s)}}),Object(a.jsx)("img",{src:i===s?f:g,alt:s}),Object(a.jsx)("span",{children:s.charAt(0).toUpperCase()+s.slice(1)})]})}n(17);function R(){return Object(a.jsxs)(g,{children:[Object(a.jsx)(C,{}),Object(a.jsx)(b,{})]})}var Y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),i(t),r(t)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(R,{})}),document.getElementById("root")),Y()}},[[18,1,2]]]);
//# sourceMappingURL=main.5b20e93c.chunk.js.map